(()=>{var e={53:function(e){e.exports=function(){"use strict";var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="ARRAYBUFFER not supported by this environment",n="UINT8ARRAY not supported by this environment";function r(e,t,n,r){var o,a,i,c=t||[0],u=(n=n||0)>>>3,s=-1===r?3:0;for(o=0;o<e.length;o+=1)a=(i=o+u)>>>2,c.length<=a&&c.push(0),c[a]|=e[o]<<8*(s+r*(i%4));return{value:c,binLen:8*e.length+n}}function o(o,a,i){switch(a){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(o){case"HEX":return function(e,t,n){return function(e,t,n,r){var o,a,i,c;if(0!=e.length%2)throw new Error("String of HEX type must be in byte increments");var u=t||[0],s=(n=n||0)>>>3,l=-1===r?3:0;for(o=0;o<e.length;o+=2){if(a=parseInt(e.substr(o,2),16),isNaN(a))throw new Error("String of HEX type contains invalid characters");for(i=(c=(o>>>1)+s)>>>2;u.length<=i;)u.push(0);u[i]|=a<<8*(l+r*(c%4))}return{value:u,binLen:4*e.length+n}}(e,t,n,i)};case"TEXT":return function(e,t,n){return function(e,t,n,r,o){var a,i,c,u,s,l,d,h,f=0,p=n||[0],v=(r=r||0)>>>3;if("UTF8"===t)for(d=-1===o?3:0,c=0;c<e.length;c+=1)for(i=[],128>(a=e.charCodeAt(c))?i.push(a):2048>a?(i.push(192|a>>>6),i.push(128|63&a)):55296>a||57344<=a?i.push(224|a>>>12,128|a>>>6&63,128|63&a):(c+=1,a=65536+((1023&a)<<10|1023&e.charCodeAt(c)),i.push(240|a>>>18,128|a>>>12&63,128|a>>>6&63,128|63&a)),u=0;u<i.length;u+=1){for(s=(l=f+v)>>>2;p.length<=s;)p.push(0);p[s]|=i[u]<<8*(d+o*(l%4)),f+=1}else for(d=-1===o?2:0,h="UTF16LE"===t&&1!==o||"UTF16LE"!==t&&1===o,c=0;c<e.length;c+=1){for(a=e.charCodeAt(c),!0===h&&(a=(u=255&a)<<8|a>>>8),s=(l=f+v)>>>2;p.length<=s;)p.push(0);p[s]|=a<<8*(d+o*(l%4)),f+=2}return{value:p,binLen:8*f+r}}(e,a,t,n,i)};case"B64":return function(t,n,r){return function(t,n,r,o){var a,i,c,u,s,l,d=0,h=n||[0],f=(r=r||0)>>>3,p=-1===o?3:0,v=t.indexOf("=");if(-1===t.search(/^[a-zA-Z0-9=+/]+$/))throw new Error("Invalid character in base-64 string");if(t=t.replace(/=/g,""),-1!==v&&v<t.length)throw new Error("Invalid '=' found in base-64 string");for(a=0;a<t.length;a+=4){for(u=t.substr(a,4),c=0,i=0;i<u.length;i+=1)c|=e.indexOf(u.charAt(i))<<18-6*i;for(i=0;i<u.length-1;i+=1){for(s=(l=d+f)>>>2;h.length<=s;)h.push(0);h[s]|=(c>>>16-8*i&255)<<8*(p+o*(l%4)),d+=1}}return{value:h,binLen:8*d+r}}(t,n,r,i)};case"BYTES":return function(e,t,n){return function(e,t,n,r){var o,a,i,c,u=t||[0],s=(n=n||0)>>>3,l=-1===r?3:0;for(a=0;a<e.length;a+=1)o=e.charCodeAt(a),i=(c=a+s)>>>2,u.length<=i&&u.push(0),u[i]|=o<<8*(l+r*(c%4));return{value:u,binLen:8*e.length+n}}(e,t,n,i)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(e){throw new Error(t)}return function(e,t,n){return function(e,t,n,o){return r(new Uint8Array(e),t,n,o)}(e,t,n,i)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(e){throw new Error(n)}return function(e,t,n){return r(e,t,n,i)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function a(r,o,a,i){switch(r){case"HEX":return function(e){return function(e,t,n,r){var o,a,i="0123456789abcdef",c="",u=t/8,s=-1===n?3:0;for(o=0;o<u;o+=1)a=e[o>>>2]>>>8*(s+n*(o%4)),c+=i.charAt(a>>>4&15)+i.charAt(15&a);return r.outputUpper?c.toUpperCase():c}(e,o,a,i)};case"B64":return function(t){return function(t,n,r,o){var a,i,c,u,s,l="",d=n/8,h=-1===r?3:0;for(a=0;a<d;a+=3)for(u=a+1<d?t[a+1>>>2]:0,s=a+2<d?t[a+2>>>2]:0,c=(t[a>>>2]>>>8*(h+r*(a%4))&255)<<16|(u>>>8*(h+r*((a+1)%4))&255)<<8|s>>>8*(h+r*((a+2)%4))&255,i=0;i<4;i+=1)l+=8*a+6*i<=n?e.charAt(c>>>6*(3-i)&63):o.b64Pad;return l}(t,o,a,i)};case"BYTES":return function(e){return function(e,t,n){var r,o,a="",i=t/8,c=-1===n?3:0;for(r=0;r<i;r+=1)o=e[r>>>2]>>>8*(c+n*(r%4))&255,a+=String.fromCharCode(o);return a}(e,o,a)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(e){throw new Error(t)}return function(e){return function(e,t,n){var r,o=t/8,a=new ArrayBuffer(o),i=new Uint8Array(a),c=-1===n?3:0;for(r=0;r<o;r+=1)i[r]=e[r>>>2]>>>8*(c+n*(r%4))&255;return a}(e,o,a)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(e){throw new Error(n)}return function(e){return function(e,t,n){var r,o=t/8,a=-1===n?3:0,i=new Uint8Array(o);for(r=0;r<o;r+=1)i[r]=e[r>>>2]>>>8*(a+n*(r%4))&255;return i}(e,o,a)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var i=4294967296,c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],u=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],s=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l="Chosen SHA variant is not supported",d="Cannot set numRounds with MAC";function h(e,t){var n,r,o=e.binLen>>>3,a=t.binLen>>>3,i=o<<3,c=4-o<<3;if(o%4!=0){for(n=0;n<a;n+=4)r=o+n>>>2,e.value[r]|=t.value[n>>>2]<<i,e.value.push(0),e.value[r+1]|=t.value[n>>>2]>>>c;return(e.value.length<<2)-4>=a+o&&e.value.pop(),{value:e.value,binLen:e.binLen+t.binLen}}return{value:e.value.concat(t.value),binLen:e.binLen+t.binLen}}function f(e){var t={outputUpper:!1,b64Pad:"=",outputLen:-1},n=e||{},r="Output length must be a multiple of 8";if(t.outputUpper=n.outputUpper||!1,n.b64Pad&&(t.b64Pad=n.b64Pad),n.outputLen){if(n.outputLen%8!=0)throw new Error(r);t.outputLen=n.outputLen}else if(n.shakeLen){if(n.shakeLen%8!=0)throw new Error(r);t.outputLen=n.shakeLen}if("boolean"!=typeof t.outputUpper)throw new Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw new Error("Invalid b64Pad formatting option");return t}function p(e,t,n,r){var a=e+" must include a value and format";if(!t){if(!r)throw new Error(a);return r}if(void 0===t.value||!t.format)throw new Error(a);return o(t.format,t.encoding||"UTF8",n)(t.value)}var v=function(){function e(e,t,n){var r=n||{};if(this.t=t,this.i=r.encoding||"UTF8",this.numRounds=r.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=e,this.u=[],this.h=0,this.v=!1,this.A=0,this.l=!1,this.H=[],this.S=[]}return e.prototype.update=function(e){var t,n=0,r=this.p>>>5,o=this.m(e,this.u,this.h),a=o.binLen,i=o.value,c=a>>>5;for(t=0;t<c;t+=r)n+this.p<=a&&(this.U=this.R(i.slice(t,t+r),this.U),n+=this.p);return this.A+=n,this.u=i.slice(n>>>5),this.h=a%this.p,this.v=!0,this},e.prototype.getHash=function(e,t){var n,r,o=this.T,i=f(t);if(this.C){if(-1===i.outputLen)throw new Error("Output length must be specified in options");o=i.outputLen}var c=a(e,o,this.F,i);if(this.l&&this.K)return c(this.K(i));for(r=this.g(this.u.slice(),this.h,this.A,this.L(this.U),o),n=1;n<this.numRounds;n+=1)this.C&&o%32!=0&&(r[r.length-1]&=16777215>>>24-o%32),r=this.g(r,o,0,this.B(this.o),o);return c(r)},e.prototype.setHMACKey=function(e,t,n){if(!this.k)throw new Error("Variant does not support HMAC");if(this.v)throw new Error("Cannot set MAC key after calling update");var r=o(t,(n||{}).encoding||"UTF8",this.F);this.Y(r(e))},e.prototype.Y=function(e){var t,n=this.p>>>3,r=n/4-1;if(1!==this.numRounds)throw new Error(d);if(this.l)throw new Error("MAC key already set");for(n<e.binLen/8&&(e.value=this.g(e.value,e.binLen,0,this.B(this.o),this.T));e.value.length<=r;)e.value.push(0);for(t=0;t<=r;t+=1)this.H[t]=909522486^e.value[t],this.S[t]=1549556828^e.value[t];this.U=this.R(this.H,this.U),this.A=this.p,this.l=!0},e.prototype.getHMAC=function(e,t){var n=f(t);return a(e,this.T,this.F,n)(this.N())},e.prototype.N=function(){var e;if(!this.l)throw new Error("Cannot call getHMAC without first setting MAC key");var t=this.g(this.u.slice(),this.h,this.A,this.L(this.U),this.T);return e=this.R(this.S,this.B(this.o)),this.g(t,this.T,this.p,e,this.T)},e}(),m=function(e,t){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},m(e,t)};function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function g(e,t){return e<<t|e>>>32-t}function y(e,t){return e>>>t|e<<32-t}function b(e,t){return e>>>t}function E(e,t,n){return e^t^n}function A(e,t,n){return e&t^~e&n}function I(e,t,n){return e&t^e&n^t&n}function k(e){return y(e,2)^y(e,13)^y(e,22)}function L(e,t){var n=(65535&e)+(65535&t);return(65535&(e>>>16)+(t>>>16)+(n>>>16))<<16|65535&n}function S(e,t,n,r){var o=(65535&e)+(65535&t)+(65535&n)+(65535&r);return(65535&(e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(o>>>16))<<16|65535&o}function M(e,t,n,r,o){var a=(65535&e)+(65535&t)+(65535&n)+(65535&r)+(65535&o);return(65535&(e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(o>>>16)+(a>>>16))<<16|65535&a}function T(e){return y(e,7)^y(e,18)^b(e,3)}function B(e){return y(e,6)^y(e,11)^y(e,25)}function H(e){return[1732584193,4023233417,2562383102,271733878,3285377520]}function C(e,t){var n,r,o,a,i,c,u,s=[];for(n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=0;u<80;u+=1)s[u]=u<16?e[u]:g(s[u-3]^s[u-8]^s[u-14]^s[u-16],1),c=u<20?M(g(n,5),A(r,o,a),i,1518500249,s[u]):u<40?M(g(n,5),E(r,o,a),i,1859775393,s[u]):u<60?M(g(n,5),I(r,o,a),i,2400959708,s[u]):M(g(n,5),E(r,o,a),i,3395469782,s[u]),i=a,a=o,o=g(r,30),r=n,n=c;return t[0]=L(n,t[0]),t[1]=L(r,t[1]),t[2]=L(o,t[2]),t[3]=L(a,t[3]),t[4]=L(i,t[4]),t}function U(e,t,n,r){for(var o,a=15+(t+65>>>9<<4),c=t+n;e.length<=a;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[a]=4294967295&c,e[a-1]=c/i|0,o=0;o<e.length;o+=16)r=C(e.slice(o,o+16),r);return r}var x=function(e){function t(t,n,r){var a=this;if("SHA-1"!==t)throw new Error(l);var i=r||{};return(a=e.call(this,t,n,r)||this).k=!0,a.K=a.N,a.F=-1,a.m=o(a.t,a.i,a.F),a.R=C,a.L=function(e){return e.slice()},a.B=H,a.g=U,a.U=[1732584193,4023233417,2562383102,271733878,3285377520],a.p=512,a.T=160,a.C=!1,i.hmacKey&&a.Y(p("hmacKey",i.hmacKey,a.F)),a}return w(t,e),t}(v);function _(e){return"SHA-224"==e?u.slice():s.slice()}function R(e,t){var n,r,o,a,i,u,s,l,d,h,f,p,v=[];for(n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],f=0;f<64;f+=1)v[f]=f<16?e[f]:S(y(p=v[f-2],17)^y(p,19)^b(p,10),v[f-7],T(v[f-15]),v[f-16]),d=M(l,B(i),A(i,u,s),c[f],v[f]),h=L(k(n),I(n,r,o)),l=s,s=u,u=i,i=L(a,d),a=o,o=r,r=n,n=L(d,h);return t[0]=L(n,t[0]),t[1]=L(r,t[1]),t[2]=L(o,t[2]),t[3]=L(a,t[3]),t[4]=L(i,t[4]),t[5]=L(u,t[5]),t[6]=L(s,t[6]),t[7]=L(l,t[7]),t}var P=function(e){function t(t,n,r){var a=this;if("SHA-224"!==t&&"SHA-256"!==t)throw new Error(l);var c=r||{};return(a=e.call(this,t,n,r)||this).K=a.N,a.k=!0,a.F=-1,a.m=o(a.t,a.i,a.F),a.R=R,a.L=function(e){return e.slice()},a.B=_,a.g=function(e,n,r,o){return function(e,t,n,r,o){for(var a,c=15+(t+65>>>9<<4),u=t+n;e.length<=c;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[c]=4294967295&u,e[c-1]=u/i|0,a=0;a<e.length;a+=16)r=R(e.slice(a,a+16),r);return"SHA-224"===o?[r[0],r[1],r[2],r[3],r[4],r[5],r[6]]:r}(e,n,r,o,t)},a.U=_(t),a.p=512,a.T="SHA-224"===t?224:256,a.C=!1,c.hmacKey&&a.Y(p("hmacKey",c.hmacKey,a.F)),a}return w(t,e),t}(v),N=function(e,t){this.I=e,this.M=t};function K(e,t){var n;return t>32?(n=64-t,new N(e.M<<t|e.I>>>n,e.I<<t|e.M>>>n)):0!==t?(n=32-t,new N(e.I<<t|e.M>>>n,e.M<<t|e.I>>>n)):e}function O(e,t){var n;return t<32?(n=32-t,new N(e.I>>>t|e.M<<n,e.M>>>t|e.I<<n)):(n=64-t,new N(e.M>>>t|e.I<<n,e.I>>>t|e.M<<n))}function F(e,t){return new N(e.I>>>t,e.M>>>t|e.I<<32-t)}function j(e,t,n){return new N(e.I&t.I^~e.I&n.I,e.M&t.M^~e.M&n.M)}function Y(e,t,n){return new N(e.I&t.I^e.I&n.I^t.I&n.I,e.M&t.M^e.M&n.M^t.M&n.M)}function D(e){var t=O(e,28),n=O(e,34),r=O(e,39);return new N(t.I^n.I^r.I,t.M^n.M^r.M)}function z(e,t){var n,r;n=(65535&e.M)+(65535&t.M);var o=(65535&(r=(e.M>>>16)+(t.M>>>16)+(n>>>16)))<<16|65535&n;return n=(65535&e.I)+(65535&t.I)+(r>>>16),r=(e.I>>>16)+(t.I>>>16)+(n>>>16),new N((65535&r)<<16|65535&n,o)}function q(e,t,n,r){var o,a;o=(65535&e.M)+(65535&t.M)+(65535&n.M)+(65535&r.M);var i=(65535&(a=(e.M>>>16)+(t.M>>>16)+(n.M>>>16)+(r.M>>>16)+(o>>>16)))<<16|65535&o;return o=(65535&e.I)+(65535&t.I)+(65535&n.I)+(65535&r.I)+(a>>>16),a=(e.I>>>16)+(t.I>>>16)+(n.I>>>16)+(r.I>>>16)+(o>>>16),new N((65535&a)<<16|65535&o,i)}function X(e,t,n,r,o){var a,i;a=(65535&e.M)+(65535&t.M)+(65535&n.M)+(65535&r.M)+(65535&o.M);var c=(65535&(i=(e.M>>>16)+(t.M>>>16)+(n.M>>>16)+(r.M>>>16)+(o.M>>>16)+(a>>>16)))<<16|65535&a;return a=(65535&e.I)+(65535&t.I)+(65535&n.I)+(65535&r.I)+(65535&o.I)+(i>>>16),i=(e.I>>>16)+(t.I>>>16)+(n.I>>>16)+(r.I>>>16)+(o.I>>>16)+(a>>>16),new N((65535&i)<<16|65535&a,c)}function J(e,t){return new N(e.I^t.I,e.M^t.M)}function W(e){var t=O(e,1),n=O(e,8),r=F(e,7);return new N(t.I^n.I^r.I,t.M^n.M^r.M)}function V(e){var t=O(e,14),n=O(e,18),r=O(e,41);return new N(t.I^n.I^r.I,t.M^n.M^r.M)}var G=[new N(c[0],3609767458),new N(c[1],602891725),new N(c[2],3964484399),new N(c[3],2173295548),new N(c[4],4081628472),new N(c[5],3053834265),new N(c[6],2937671579),new N(c[7],3664609560),new N(c[8],2734883394),new N(c[9],1164996542),new N(c[10],1323610764),new N(c[11],3590304994),new N(c[12],4068182383),new N(c[13],991336113),new N(c[14],633803317),new N(c[15],3479774868),new N(c[16],2666613458),new N(c[17],944711139),new N(c[18],2341262773),new N(c[19],2007800933),new N(c[20],1495990901),new N(c[21],1856431235),new N(c[22],3175218132),new N(c[23],2198950837),new N(c[24],3999719339),new N(c[25],766784016),new N(c[26],2566594879),new N(c[27],3203337956),new N(c[28],1034457026),new N(c[29],2466948901),new N(c[30],3758326383),new N(c[31],168717936),new N(c[32],1188179964),new N(c[33],1546045734),new N(c[34],1522805485),new N(c[35],2643833823),new N(c[36],2343527390),new N(c[37],1014477480),new N(c[38],1206759142),new N(c[39],344077627),new N(c[40],1290863460),new N(c[41],3158454273),new N(c[42],3505952657),new N(c[43],106217008),new N(c[44],3606008344),new N(c[45],1432725776),new N(c[46],1467031594),new N(c[47],851169720),new N(c[48],3100823752),new N(c[49],1363258195),new N(c[50],3750685593),new N(c[51],3785050280),new N(c[52],3318307427),new N(c[53],3812723403),new N(c[54],2003034995),new N(c[55],3602036899),new N(c[56],1575990012),new N(c[57],1125592928),new N(c[58],2716904306),new N(c[59],442776044),new N(c[60],593698344),new N(c[61],3733110249),new N(c[62],2999351573),new N(c[63],3815920427),new N(3391569614,3928383900),new N(3515267271,566280711),new N(3940187606,3454069534),new N(4118630271,4000239992),new N(116418474,1914138554),new N(174292421,2731055270),new N(289380356,3203993006),new N(460393269,320620315),new N(685471733,587496836),new N(852142971,1086792851),new N(1017036298,365543100),new N(1126000580,2618297676),new N(1288033470,3409855158),new N(1501505948,4234509866),new N(1607167915,987167468),new N(1816402316,1246189591)];function Z(e){return"SHA-384"===e?[new N(3418070365,u[0]),new N(1654270250,u[1]),new N(2438529370,u[2]),new N(355462360,u[3]),new N(1731405415,u[4]),new N(41048885895,u[5]),new N(3675008525,u[6]),new N(1203062813,u[7])]:[new N(s[0],4089235720),new N(s[1],2227873595),new N(s[2],4271175723),new N(s[3],1595750129),new N(s[4],2917565137),new N(s[5],725511199),new N(s[6],4215389547),new N(s[7],327033209)]}function $(e,t){var n,r,o,a,i,c,u,s,l,d,h,f,p,v,m,w,g=[];for(n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],c=t[5],u=t[6],s=t[7],h=0;h<80;h+=1)h<16?(f=2*h,g[h]=new N(e[f],e[f+1])):g[h]=q((void 0,void 0,void 0,v=O(p=g[h-2],19),m=O(p,61),w=F(p,6),new N(v.I^m.I^w.I,v.M^m.M^w.M)),g[h-7],W(g[h-15]),g[h-16]),l=X(s,V(i),j(i,c,u),G[h],g[h]),d=z(D(n),Y(n,r,o)),s=u,u=c,c=i,i=z(a,l),a=o,o=r,r=n,n=z(l,d);return t[0]=z(n,t[0]),t[1]=z(r,t[1]),t[2]=z(o,t[2]),t[3]=z(a,t[3]),t[4]=z(i,t[4]),t[5]=z(c,t[5]),t[6]=z(u,t[6]),t[7]=z(s,t[7]),t}var Q=function(e){function t(t,n,r){var a=this;if("SHA-384"!==t&&"SHA-512"!==t)throw new Error(l);var c=r||{};return(a=e.call(this,t,n,r)||this).K=a.N,a.k=!0,a.F=-1,a.m=o(a.t,a.i,a.F),a.R=$,a.L=function(e){return e.slice()},a.B=Z,a.g=function(e,n,r,o){return function(e,t,n,r,o){for(var a,c=31+(t+129>>>10<<5),u=t+n;e.length<=c;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[c]=4294967295&u,e[c-1]=u/i|0,a=0;a<e.length;a+=32)r=$(e.slice(a,a+32),r);return"SHA-384"===o?[r[0].I,r[0].M,r[1].I,r[1].M,r[2].I,r[2].M,r[3].I,r[3].M,r[4].I,r[4].M,r[5].I,r[5].M]:[r[0].I,r[0].M,r[1].I,r[1].M,r[2].I,r[2].M,r[3].I,r[3].M,r[4].I,r[4].M,r[5].I,r[5].M,r[6].I,r[6].M,r[7].I,r[7].M]}(e,n,r,o,t)},a.U=Z(t),a.p=1024,a.T="SHA-384"===t?384:512,a.C=!1,c.hmacKey&&a.Y(p("hmacKey",c.hmacKey,a.F)),a}return w(t,e),t}(v),ee=[new N(0,1),new N(0,32898),new N(2147483648,32906),new N(2147483648,2147516416),new N(0,32907),new N(0,2147483649),new N(2147483648,2147516545),new N(2147483648,32777),new N(0,138),new N(0,136),new N(0,2147516425),new N(0,2147483658),new N(0,2147516555),new N(2147483648,139),new N(2147483648,32905),new N(2147483648,32771),new N(2147483648,32770),new N(2147483648,128),new N(0,32778),new N(2147483648,2147483658),new N(2147483648,2147516545),new N(2147483648,32896),new N(0,2147483649),new N(2147483648,2147516424)],te=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function ne(e){var t,n=[];for(t=0;t<5;t+=1)n[t]=[new N(0,0),new N(0,0),new N(0,0),new N(0,0),new N(0,0)];return n}function re(e){var t,n=[];for(t=0;t<5;t+=1)n[t]=e[t].slice();return n}function oe(e,t){var n,r,o,a,i,c,u,s,l,d=[],h=[];if(null!==e)for(r=0;r<e.length;r+=2)t[(r>>>1)%5][(r>>>1)/5|0]=J(t[(r>>>1)%5][(r>>>1)/5|0],new N(e[r+1],e[r]));for(n=0;n<24;n+=1){for(a=ne(),r=0;r<5;r+=1)d[r]=(i=t[r][0],c=t[r][1],u=t[r][2],s=t[r][3],l=t[r][4],new N(i.I^c.I^u.I^s.I^l.I,i.M^c.M^u.M^s.M^l.M));for(r=0;r<5;r+=1)h[r]=J(d[(r+4)%5],K(d[(r+1)%5],1));for(r=0;r<5;r+=1)for(o=0;o<5;o+=1)t[r][o]=J(t[r][o],h[r]);for(r=0;r<5;r+=1)for(o=0;o<5;o+=1)a[o][(2*r+3*o)%5]=K(t[r][o],te[r][o]);for(r=0;r<5;r+=1)for(o=0;o<5;o+=1)t[r][o]=J(a[r][o],new N(~a[(r+1)%5][o].I&a[(r+2)%5][o].I,~a[(r+1)%5][o].M&a[(r+2)%5][o].M));t[0][0]=J(t[0][0],ee[n])}return t}function ae(e){var t,n,r=0,o=[0,0],a=[4294967295&e,e/i&2097151];for(t=6;t>=0;t--)0==(n=a[t>>2]>>>8*t&255)&&0===r||(o[r+1>>2]|=n<<8*(r+1),r+=1);return r=0!==r?r:1,o[0]|=r,{value:r+1>4?o:[o[0]],binLen:8+8*r}}function ie(e){return h(ae(e.binLen),e)}function ce(e,t){var n,r=ae(t),o=t>>>2,a=(o-(r=h(r,e)).value.length%o)%o;for(n=0;n<a;n++)r.value.push(0);return r.value}var ue=function(e){function t(t,n,r){var a=this,i=6,c=0,u=r||{};if(1!==(a=e.call(this,t,n,r)||this).numRounds){if(u.kmacKey||u.hmacKey)throw new Error(d);if("CSHAKE128"===a.o||"CSHAKE256"===a.o)throw new Error("Cannot set numRounds for CSHAKE variants")}switch(a.F=1,a.m=o(a.t,a.i,a.F),a.R=oe,a.L=re,a.B=ne,a.U=ne(),a.C=!1,t){case"SHA3-224":a.p=c=1152,a.T=224,a.k=!0,a.K=a.N;break;case"SHA3-256":a.p=c=1088,a.T=256,a.k=!0,a.K=a.N;break;case"SHA3-384":a.p=c=832,a.T=384,a.k=!0,a.K=a.N;break;case"SHA3-512":a.p=c=576,a.T=512,a.k=!0,a.K=a.N;break;case"SHAKE128":i=31,a.p=c=1344,a.T=-1,a.C=!0,a.k=!1,a.K=null;break;case"SHAKE256":i=31,a.p=c=1088,a.T=-1,a.C=!0,a.k=!1,a.K=null;break;case"KMAC128":i=4,a.p=c=1344,a.X(r),a.T=-1,a.C=!0,a.k=!1,a.K=a.O;break;case"KMAC256":i=4,a.p=c=1088,a.X(r),a.T=-1,a.C=!0,a.k=!1,a.K=a.O;break;case"CSHAKE128":a.p=c=1344,i=a.j(r),a.T=-1,a.C=!0,a.k=!1,a.K=null;break;case"CSHAKE256":a.p=c=1088,i=a.j(r),a.T=-1,a.C=!0,a.k=!1,a.K=null;break;default:throw new Error(l)}return a.g=function(e,t,n,r,o){return function(e,t,n,r,o,a,i){var c,u,s=0,l=[],d=o>>>5,h=t>>>5;for(c=0;c<h&&t>=o;c+=d)r=oe(e.slice(c,c+d),r),t-=o;for(e=e.slice(c),t%=o;e.length<d;)e.push(0);for(e[(c=t>>>3)>>2]^=a<<c%4*8,e[d-1]^=2147483648,r=oe(e,r);32*l.length<i&&(u=r[s%5][s/5|0],l.push(u.M),!(32*l.length>=i));)l.push(u.I),0==64*(s+=1)%o&&(oe(null,r),s=0);return l}(e,t,0,r,c,i,o)},u.hmacKey&&a.Y(p("hmacKey",u.hmacKey,a.F)),a}return w(t,e),t.prototype.j=function(e,t){var n=function(e){var t=e||{};return{funcName:p("funcName",t.funcName,1,{value:[],binLen:0}),customization:p("Customization",t.customization,1,{value:[],binLen:0})}}(e||{});t&&(n.funcName=t);var r=h(ie(n.funcName),ie(n.customization));if(0!==n.customization.binLen||0!==n.funcName.binLen){for(var o=ce(r,this.p>>>3),a=0;a<o.length;a+=this.p>>>5)this.U=this.R(o.slice(a,a+(this.p>>>5)),this.U),this.A+=this.p;return 4}return 31},t.prototype.X=function(e){var t=function(e){var t=e||{};return{kmacKey:p("kmacKey",t.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:p("Customization",t.customization,1,{value:[],binLen:0})}}(e||{});this.j(e,t.funcName);for(var n=ce(ie(t.kmacKey),this.p>>>3),r=0;r<n.length;r+=this.p>>>5)this.U=this.R(n.slice(r,r+(this.p>>>5)),this.U),this.A+=this.p;this.l=!0},t.prototype.O=function(e){var t=h({value:this.u.slice(),binLen:this.h},function(e){var t,n,r=0,o=[0,0],a=[4294967295&e,e/i&2097151];for(t=6;t>=0;t--)0==(n=a[t>>2]>>>8*t&255)&&0===r||(o[r>>2]|=n<<8*r,r+=1);return o[(r=0!==r?r:1)>>2]|=r<<8*r,{value:r+1>4?o:[o[0]],binLen:8+8*r}}(e.outputLen));return this.g(t.value,t.binLen,this.A,this.L(this.U),e.outputLen)},t}(v);return function(){function e(e,t,n){if("SHA-1"==e)this._=new x(e,t,n);else if("SHA-224"==e||"SHA-256"==e)this._=new P(e,t,n);else if("SHA-384"==e||"SHA-512"==e)this._=new Q(e,t,n);else{if("SHA3-224"!=e&&"SHA3-256"!=e&&"SHA3-384"!=e&&"SHA3-512"!=e&&"SHAKE128"!=e&&"SHAKE256"!=e&&"CSHAKE128"!=e&&"CSHAKE256"!=e&&"KMAC128"!=e&&"KMAC256"!=e)throw new Error(l);this._=new ue(e,t,n)}}return e.prototype.update=function(e){return this._.update(e),this},e.prototype.getHash=function(e,t){return this._.getHash(e,t)},e.prototype.setHMACKey=function(e,t,n){this._.setHMACKey(e,t,n)},e.prototype.getHMAC=function(e,t){return this._.getHMAC(e,t)},e}()}()},833:(e,t,n)=>{"use strict";let r=n(53);function o(e){return parseInt(e,16)}function a(e,t,n){return t+1>=e.length&&(e=Array(t+1-e.length).join(n)+e),e}r.default&&(r=r.default),e.exports=function(e,t){let n,i,c,u,s,l;var d;return(t=t||{}).period=t.period||30,t.algorithm=t.algorithm||"SHA-1",t.digits=t.digits||6,t.timestamp=t.timestamp||Date.now(),e=function(e){let t="",n="";e=e.replace(/=+$/,"");for(let n=0;n<e.length;n++){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".indexOf(e.charAt(n).toUpperCase());if(-1===r)throw new Error("Invalid base32 character in key");t+=a(r.toString(2),5,"0")}for(let e=0;e+8<=t.length;e+=8){let r=t.substr(e,8);n+=a(parseInt(r,2).toString(16),2,"0")}return n}(e),n=Math.floor(t.timestamp/1e3),i=a(((d=Math.floor(n/t.period))<15.5?"0":"")+Math.round(d).toString(16),16,"0"),c=new r(t.algorithm,"HEX"),c.setHMACKey(e,"HEX"),c.update(i),u=c.getHMAC("HEX"),s=o(u.substring(u.length-1)),l=(o(u.substr(2*s,8))&o("7fffffff"))+"",l=l.substr(Math.max(l.length-t.digits,0),t.digits),l}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){u=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw i}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function a(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(n)?n:String(n)}var c=function(){function e(n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"element",null),a(this,"pageMap",{}),a(this,"currentPageName",null),this.element=n;var o,i=t(n.querySelectorAll("div.page-panel-page"));try{for(i.s();!(o=i.n()).done;){var c=o.value,u=c.getAttribute("page");this.pageMap[u]=c,c.classList.contains("page-panel-visible")&&(this.currentPageName=u)}}catch(e){i.e(e)}finally{i.f()}var s,l=t(n.querySelectorAll("div.page-panel-nav a"));try{for(l.s();!(s=l.n()).done;){var d=s.value,h=d.getAttribute("page");this.pageMap[h]&&(this.pageMap[h].link=d,d.addEventListener("click",(function(e){e.preventDefault(),r.switchPage(e.target.getAttribute("page"))})))}}catch(e){l.e(e)}finally{l.f()}var f=new Event("panelCreated");f.panel=this,this.element.dispatchEvent(f)}var n,r,i;return n=e,i=[{key:"init",value:function(){var n,r=t(document.querySelectorAll("div.page-panel"));try{for(r.s();!(n=r.n()).done;){var o=n.value;e.pagePanels[o.id]=new e(o)}}catch(e){r.e(e)}finally{r.f()}}}],(r=[{key:"switchPage",value:function(e){var t=this.currentPageName;if(t!==e&&this.pageMap[e]){this.pageMap[t].classList.remove("page-panel-visible"),this.pageMap[t].link.parentElement.classList.remove("page-panel-active"),this.pageMap[e].classList.add("page-panel-visible"),this.pageMap[e].link.parentElement.classList.add("page-panel-active"),this.currentPageName=e;var n=new Event("panelSwitched");n.panel=this,this.element.dispatchEvent(n)}}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function l(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}a(c,"pagePanels",{});var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"show",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Ok";return this.confirm(e,t,n,null)}},{key:"confirm",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Ok",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Cancel";return new Promise((function(a,i){var c=document.getElementById("overlay"),u=document.getElementById("dialog"),s=document.getElementById("dialog_message"),l=document.getElementById("dialog_explanation"),d=document.getElementById("dialog_action_button"),h=document.getElementById("dialog_cancel_button");c&&u&&s&&l&&d&&h?(c.className="exist",u.className="exist",setTimeout((function(){c.className="exist visible",u.className="exist visible"}),10),s.innerText=e,l.innerText=n||"",d.clickHandler&&d.removeEventListener("click",d.clickHandler),h.clickHandler&&h.removeEventListener("click",h.clickHandler),d.clickHandler=function(){t.hide(),setTimeout((function(){a()}),300)},d.addEventListener("click",d.clickHandler),d.innerText=r,o?(h.clickHandler=function(){t.hide(),setTimeout((function(){i()}),300)},h.addEventListener("click",h.clickHandler),h.innerText=o):h.className="hidden"):i()}))}},{key:"hide",value:function(){var e=document.getElementById("overlay"),t=document.getElementById("dialog");e&&t&&(e.className="exist",t.className="exist",setTimeout((function(){e.className="",t.className=""}),300))}},{key:"showModal",value:function(e){var t=this;if(!this.activeModal){var n=document.getElementById("overlay"),r=document.getElementById(e);n&&r&&(n.classList.add("exist"),r.classList.add("exist"),this.activeModal=e,setTimeout((function(){n.classList.add("visible"),r.classList.add("visible")}),10),this.viewportWatcher=setInterval((function(){if(t.activeModal){document.querySelectorAll("#".concat(t.activeModal," .modal-content .content")).forEach((function(e){r.classList.toggle("scrolled",e.scrollHeight>e.clientHeight)}));var e=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);r.classList.toggle("centered",r.clientHeight>.75*e)}}),100))}}},{key:"hideModal",value:function(){var e=this;return new Promise((function(t,n){if(e.activeModal){var r=document.getElementById("overlay"),o=document.getElementById(e.activeModal);r&&o?(e.viewportWatcher&&(clearInterval(e.viewportWatcher),e.viewportWatcher=null),r.classList.remove("visible"),o.classList.remove("visible"),setTimeout((function(){r.classList.remove("exist"),o.classList.remove("exist"),e.activeModal=null,t()}),300)):n()}else n()}))}}],null&&s(t.prototype,null),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===f(o)?o:String(o)),r)}var o}l(h,"activeModal",null),l(h,"viewportWatcher",null);var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"prepareResponse",value:function(e){return{xhr:e,status:e.status,statusText:e.statusText,body:e.responseText,success:e.status>=200&&e.status<300||304===e.status}}},{key:"start",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(a,i){var c=new XMLHttpRequest;if(c.open(e,t,!0),"object"===f(o)&&null!==o&&!1===Array.isArray(o))for(var u=0,s=Object.keys(o);u<s.length;u++){var l=s[u];c.setRequestHeader(l,o[l])}c.onload=function(){var e=n.prepareResponse(c);e.success?a(e):i(e)},c.onerror=function(){i(n.prepareResponse(c))},c.send(r)}))}},{key:"get",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.start("GET",t,null,n)}},{key:"post",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n instanceof URLSearchParams?(r["Content-Type"]="application/x-www-form-urlencoded",e.start("POST",t,n.toString(),r)):"object"===f(n)&&null!==n||Array.isArray(n)?(r["Content-Type"]="application/json",e.start("POST",t,JSON.stringify(n),r)):e.start("POST",t,n,r)}},{key:"delete",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.start("DELETE",t,null,n)}}],null&&p(t.prototype,null),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),m=n(833),w=n.n(m);function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}document.addEventListener("beaconRunAccountPanel",(function(e){var t=e.accountProperties,n="",r=t.sessionId,o=t.apiDomain,a=document.getElementById("account-user-header"),i=a.getAttribute("beacon-user-name"),u=a.getAttribute("beacon-user-suffix"),s="".concat(i,"#").concat(u),l=function(){var e=window.location.hash;return e?(e.startsWith("#")&&(e=e.substr(1)),e):""};c.init();var d=c.pagePanels["panel-account"];d&&(d.switchPage(l()),window.addEventListener("popstate",(function(){d.switchPage(l())})));var f=document.getElementById("panel-account");f&&f.addEventListener("panelSwitched",(function(e){window.location.hash=e.panel.currentPageName}));var p,m=g(document.querySelectorAll('#panel-account div[page="projects"] [beacon-action="delete"]'));try{for(m.s();!(p=m.n()).done;)p.value.addEventListener("click",(function(e){e.preventDefault();var t=e.target.getAttribute("beacon-resource-url"),n=e.target.getAttribute("beacon-resource-name");return h.confirm('Are you sure you want to delete the project "'+n+'?"',"The project will be deleted immediately and cannot be recovered.","Delete").then((function(){v.delete(t,{Authorization:"Bearer ".concat(r)}).then((function(){h.show("Project deleted",'"'+n+'" has been deleted.').then((function(){window.location.reload(!0)}))})).catch((function(e){401===e.status?h.show("Project not deleted","There was an authentication error"):h.show("Project not deleted","Sorry, there was a ".concat(e.status," error."))}))})).catch((function(){})),!1}))}catch(e){m.e(e)}finally{m.f()}var y=document.getElementById("omni_show_instructions_internet");y&&y.addEventListener("click",(function(e){e.preventDefault();var t=document.getElementById("omni_instructions_internet");t&&(t.classList.contains("hidden")?t.classList.remove("hidden"):t.classList.add("hidden"))}));var b=document.getElementById("omni_show_instructions_no_internet");if(b&&b.addEventListener("click",(function(e){e.preventDefault();var t=document.getElementById("omni_instructions_no_internet");t&&(t.classList.contains("hidden")?t.classList.remove("hidden"):t.classList.add("hidden"))})),self.fetch&&window.FileReader&&"classList"in document.createElement("a")){var E=function(e){var t=new FormData;t.append("file",e),fetch(document.getElementById("upload_activation_form").getAttribute("action"),{method:"POST",body:t,credentials:"same-origin",headers:{Accept:"application/json"}}).then((function(e){if(e.ok){var t=e.headers.get("content-disposition"),n=/"([^"]*)"/.exec(t),r=null!=n&&n[1]?n[1]:"Default.beaconidentity";e.blob().then((function(e){var t=document.createElement("a");t.href=window.URL.createObjectURL(e),t.download=r,document.body.appendChild(t),t.click(),document.body.removeChild(t)}))}else e.json().then((function(e){var t={message:"Unable to create authorization file",explanation:"Sorry, there was an error creating the authorization file."};e.message&&(t.explanation+=" "+e.message.trim()),t.explanation.endsWith(".")||(t.explanation+="."),h.show(t.message,t.explanation)}))})).catch((function(e){h.show("Unable to create authorization file","There was a network error: "+e)}))},A=document.getElementById("upload_container");A&&A.classList.add("live-supported");var I=document.getElementById("drop_area");I&&(["dragenter","dragover","dragleave","drop"].forEach((function(e){I.addEventListener(e,(function(e){e.preventDefault(),e.stopPropagation()}),!1)})),["dragenter","dragover"].forEach((function(e){I.addEventListener(e,(function(e){e.target.classList.add("highlight")}),!1)})),["dragleave","drop"].forEach((function(e){I.addEventListener(e,(function(e){e.target.classList.remove("highlight")}),!1)})),I.addEventListener("drop",(function(e){E(e.dataTransfer.files[0])}),!1));var k=document.getElementById("choose_file_button");k&&k.addEventListener("click",(function(e){e.preventDefault();var t=document.getElementById("file_chooser");t&&(t.addEventListener("change",(function(e){E(e.target.files[0])})),t.click())}))}var L=document.getElementById("username_action_button"),S=document.getElementById("username_field"),M=document.getElementById("suggested-username-link"),T=document.getElementById("new-suggestion-link");L&&S&&(S.addEventListener("input",(function(e){L.disabled=""===e.target.value.trim()})),L.addEventListener("click",(function(e){e.preventDefault();var t=S.value.trim();if(""===t)return h.show("Username can not be empty","How did you press the button anyway?"),!1;var n=new URLSearchParams;n.append("username",t),v.post("/account/actions/username",n).then((function(e){var t={message:"Username changed",explanation:"Your username has been changed."};try{var n=JSON.parse(e.body);t.explanation='Your username has been changed to "'.concat(n.username,'."')}catch(e){}h.show(t.message,t.explanation).then((function(){window.location.reload(!0)}))})).catch((function(e){401===e.status?h.show("Username not changed","There was an authentication error."):h.show("Username not changed","Sorry, there was a ".concat(e.status," error."))}))})),M&&(M.addEventListener("click",(function(e){return e.preventDefault(),S.value=e.currentTarget.getAttribute("beacon-username"),L.disabled=""===S.value.trim(),!1})),T&&T.addEventListener("click",(function(e){return v.get("/account/login/suggest").then((function(e){try{var t=JSON.parse(e.body);M&&(M.innerText=t.username,M.setAttribute("beacon-username",t.username))}catch(e){}})).catch((function(){})),e.preventDefault(),!1}))));var B=document.getElementById("password_action_button"),H=document.getElementById("password_regenerate_check"),C=document.getElementById("change_password_form"),U=document.getElementById("password_current_field"),x=document.getElementById("password_initial_field"),_=document.getElementById("password_confirm_field"),R=document.getElementById("add-authenticator-button"),P=document.getElementById("add-authenticator-code-field"),N=document.getElementById("add-authenticator-nickname-field"),K=document.getElementById("add-authenticator-action-button"),O=document.getElementById("add-authenticator-cancel-button"),F=document.getElementById("add-authenticator-qrcode"),j=document.getElementById("authenticators_time_zone_name"),Y=document.getElementById("replace-backup-codes-button");B&&H&&C&&B.addEventListener("click",(function(e){e.preventDefault();var t=U?U.value:"",r=x?x.value:"",o=_?_.value:"",a=r===n,i=H.checked,c=i;if(r.length<8)return h.show("Password too short","Your password must be at least 8 characters long."),!1;if(r!==o)return h.show("Passwords do not match","Please make sure the two passwords match."),!1;var u=new URLSearchParams;return u.append("current_password",t),u.append("password",r),u.append("allow_vulnerable",a),c&&u.append("terminate_sessions",!0),i&&u.append("regenerate_key",!0),v.post("/account/actions/password",u).then((function(){C.reset();try{var e={};e.message=i?"Your password and private key have been changed.":"Your password has been changed.",e.explanation="All sessions have been revoked and your devices will need to sign in again.",h.show(e.message,e.explanation)}catch(e){console.log(e),h.show("There was an error. Your password may or may not have been changed.")}})).catch((function(e){var t="Unable to change password",o="There was a ".concat(e.status," error while trying to change your password.");try{var a=JSON.parse(e.body);a.message&&(o=a.message)}catch(e){}switch(e.status){case 403:t="Incorrect Two Step Verification Code",o="Please get a new code from your authenticator app.";break;case 438:n=r,t="Your password is vulnerable.",o="Your password has been leaked in a previous breach and should not be used. To ignore this warning, you may submit the password again, but that is not recommended."}h.show(t,o)})),!1}));var D=function(){if(B)return U&&x&&_?void(B.disabled=""===U.value.trim()||""===x.value.trim()||x.value!==_.value):(console.log("Missing page fields"),void(B.disabled=!0))};if(U&&U.addEventListener("input",D),x&&x.addEventListener("input",D),_&&_.addEventListener("input",D),R&&P&&N&&K&&O)try{var z={authenticatorId:crypto.randomUUID?crypto.randomUUID():([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})),type:"TOTP",nickname:"Google Authenticator",metadata:{secret:null,setup:null}};P.addEventListener("input",(function(e){K.disabled=""===e.target.value.trim()})),R.addEventListener("click",(function(){z.metadata.secret=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",t=new Uint32Array(4);self.crypto.getRandomValues(t);var n,r="",o=g(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;r+=e[a>>>27&31]+e[a>>>22&31]+e[a>>>17&31]+e[a>>>12&31]+e[a>>>7&31]+e[a>>>2&31]}}catch(e){o.e(e)}finally{o.f()}return r}(),z.metadata.setup="otpauth://totp/".concat(encodeURIComponent("Beacon:"+s+" ("+z.authenticatorId+")"),"?secret=").concat(z.metadata.secret,"&issuer=Beacon"),F&&(F.src="/account/assets/qr.php?content=".concat(btoa(z.metadata.setup)),F.setAttribute("alt",z.metadata.setup),F.setAttribute("title",z.metadata.setup)),P.value="",h.showModal("add-authenticator-modal")})),O.addEventListener("click",(function(){h.hideModal()})),K.addEventListener("click",(function(){var e=P.value.trim();if(z.nickname=N.value.trim(),z.verificationCode=e,e!==w()(z.metadata.secret)){P.classList.add("invalid");var t=document.querySelector('label[for="'.concat(P.id,'"]'));return t&&(t.classList.add("invalid"),t.innerText="Incorrect Code"),void setTimeout((function(){t&&(t.classList.remove("invalid"),t.innerText="Verification Code"),P&&P.classList.remove("invalid")}),3e3)}v.post("https://".concat(o,"/v4/authenticators"),z,{Authorization:"Bearer ".concat(r)}).then((function(){window.location.reload(!0)})).catch((function(e){console.log(JSON.stringify(e))}))}))}catch(e){R.addEventListener("click",(function(){h.show("Sorry, this browser is not supported","There was an error generating the authenticator, which means your browser does not support modern cryptography features. Try again with an updated browser.")}))}var q,X,J=document.querySelectorAll("#authenticators-table tbody tr").length;if(J>0){var W,V=g(document.querySelectorAll("time"));try{for(V.s();!(W=V.n()).done;){var G=W.value;if(!G.classList.contains("no-localize")){var Z=new Date(G.getAttribute("datetime"));Z&&(G.innerText=(q=Z,X=void 0,(X={dateStyle:"medium"}).timeStyle="short",Intl.DateTimeFormat(Intl.DateTimeFormat().resolvedOptions().locale,X).format(q)))}}}catch(e){V.e(e)}finally{V.f()}j&&(j.innerText=Intl.DateTimeFormat().resolvedOptions().timeZone);var $,Q=g(document.querySelectorAll("button.delete_authenticator_button"));try{for(Q.s();!($=Q.n()).done;)$.value.addEventListener("click",(function(e){var t=e.target.getAttribute("beacon-authenticator-id"),n=e.target.getAttribute("beacon-authenticator-name"),a={message:"Are you sure you want to delete the authenticator ".concat(n,"?")};if(J>1){var i=J-1,c=1===i?"authenticator":"authenticators";a.explanation="You will have ".concat(i," ").concat(c," remaining. Your account will still be protected by two factor authentication.")}else a.explanation="This is your only authenticator. Deleting it will disable two factor authentication for your account. You will be able to add a new authenticator to enable two factor authentication again.";h.confirm(a.message,a.explanation).then((function(){v.delete("https://".concat(o,"/v4/authenticators/").concat(t),{Authorization:"Bearer ".concat(r)}).then((function(){var e=document.getElementById("authenticator-".concat(t));e&&J>1?(e.remove(),J--):window.location.reload(!0)})).catch((function(e){var t={message:"The authenticator was not deleted",explanation:"There was a ".concat(e.status," error.")};try{var n=JSON.parse(e.body);n.message&&(t.explanation=n.message)}catch(e){}h.show(t.message,t.explanation)}))})).catch((function(){}))}))}catch(e){Q.e(e)}finally{Q.f()}}Y&&Y.addEventListener("click",(function(){h.confirm("Replace backup codes?","This will replace all of your backup codes with new ones.").then((function(){v.post("/account/actions/replace_backup_codes",{},{Authorization:"Bearer ".concat(r)}).then((function(e){try{var t=document.getElementById("backup-codes"),n=JSON.parse(e.body).codes;t.innerHTML="";var r,o=g(n);try{for(o.s();!(r=o.n()).done;){var a=r.value,i=document.createElement("div");i.innerText=a,i.className="flex-grid-item",t.appendChild(i)}}catch(e){o.e(e)}finally{o.f()}}catch(e){window.location.reload(!0)}})).catch((function(e){console.log(JSON.stringify(e));var t={message:"Backup codes not replaced",explanation:"There was a ".concat(e.status," error.")};try{var n=JSON.parse(e.body);n.message&&(t.explanation=n.message)}catch(e){}h.show(t.message,t.explanation)}))})).catch((function(){}))}));var ee,te=function(e){return e.preventDefault(),v.delete("https://".concat(o,"/v4/sessions/").concat(encodeURIComponent(e.target.getAttribute("sessionHash"))),{Authorization:"Bearer ".concat(r)}).then((function(){h.show("Session revoked","Be aware that any enabled user with a copy of your account's private key can start a new session.").then((function(){window.location.reload(!0)}))})).catch((function(e){401===e.status?h.show("Session not revoked","There was an authentication error"):h.show("Session not revoked","Sorry, there was a "+e.status+" error.")})),!1},ne=g(document.querySelectorAll('#panel-account div[page="sessions"] a.revokeLink'));try{for(ne.s();!(ee=ne.n()).done;)ee.value.addEventListener("click",te)}catch(e){ne.e(e)}finally{ne.f()}var re,oe=function(e){e.preventDefault();var t=e.currentTarget.getAttribute("beacon-app-id");v.get("https://".concat(o,"/v4/applications/").concat(encodeURIComponent(t)),{Authorization:"Bearer ".concat(r)}).then((function(e){JSON.parse(e.body)})).catch((function(){h.show("Could not retrieve application info")}))},ae=g(document.querySelectorAll('#panel-account div[page="apps"] button.apps-edit-button'));try{for(ae.s();!(re=ae.n()).done;)re.value.addEventListener("click",oe)}catch(e){ae.e(e)}finally{ae.f()}var ie,ce=document.getElementById("static-token-modal"),ue=document.getElementById("static-token-name-field"),se=document.getElementById("static-token-token-field"),le=document.getElementById("static-token-cancel-button"),de=document.getElementById("static-token-action-button"),he=document.getElementById("static-token-provider-field"),fe=document.getElementById("static-token-generate-link"),pe=document.getElementById("static-token-help-field"),ve=document.getElementById("static-token-error-field"),me=function(e){e.preventDefault();var t=e.currentTarget.getAttribute("beacon-provider"),n=e.currentTarget.getAttribute("beacon-provider-type"),a=e.currentTarget.getAttribute("beacon-token-id"),i=e.currentTarget.getAttribute("beacon-token-name");if(""===a)switch(n){case"oauth":window.location="/account/oauth/v4/begin/".concat(t);break;case"static":if(ce&&ue&&se&&he&&fe&&pe){switch(ue.value="",se.value="",he.value=t,ve.classList.add("hidden"),t){case"nitrado":fe.href="https://server.nitrado.net/usa/developer/tokens",pe.innerText='Beacon requires long life tokens from Nitrado to have the "service" scope enabled.',pe.classList.remove("hidden");break;case"gameserverapp":fe.href="https://dash.gameserverapp.com/configure/api",pe.innerText='On your GameServerApp.com dashboard, you will find an "API / Integrate" option where you can issue a token for Beacon. Copy the token into the field below to continue. Remember to keep your token in a safe place in case you need it again.',pe.classList.remove("hidden")}h.showModal("static-token-modal")}}else h.confirm("Are you sure you want to remove the service ".concat(i,"?"),"You will be able to connect the service again if you choose to.","Delete","Cancel").then((function(){v.delete("https://".concat(o,"/v4/tokens/").concat(a),{Authorization:"Bearer ".concat(r)}).then((function(){window.location.reload(!0)})).catch((function(){h.show("The service was not deleted.")}))}))},we=g(document.querySelectorAll('#panel-account div[page="services"] .service-action button'));try{for(we.s();!(ie=we.n()).done;)ie.value.addEventListener("click",me)}catch(e){we.e(e)}finally{we.f()}if(ce&&ue&&se&&le&&de&&he&&ve){var ge=function(){de.disabled=""===ue.value.trim()||""===se.value.trim()};ue.addEventListener("input",(function(){ge()})),se.addEventListener("input",(function(){ge()})),le.addEventListener("click",(function(e){e.preventDefault(),h.hideModal()})),de.addEventListener("click",(function(e){e.preventDefault(),de.disabled=!0,ve.classList.add("hidden");var t={provider:he.value,type:"Static",accessToken:se.value.trim(),providerSpecific:{tokenName:ue.value.trim()}},n=function(){v.post("https://".concat(o,"/v4/user/tokens"),t,{Authorization:"Bearer ".concat(r)}).then((function(){window.location.reload(!0)})).catch((function(){ve.innerText="Could not save token.",ve.classList.remove("hidden"),de.disabled=!1}))};"nitrado"===t.provider?v.get("https://api.nitrado.net/token",{Authorization:"Bearer ".concat(t.accessToken)}).then((function(e){var r=JSON.parse(e.body);if(!1===r.data.token.scopes.includes("service"))return ve.innerText='The long life token is valid, but is missing the "service" scope that Beacon requires.',ve.classList.remove("hidden"),void(de.disabled=!1);t.providerSpecific.user=r.data.token.user,n()})).catch((function(){ve.innerText="The long life token is not valid. Double check the Nitrado website, as the beginning of the token can wrap to another line.",ve.classList.remove("hidden"),de.disabled=!1})):n()}))}}))})()})();